(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{SUx8:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomersModule",(function(){return V}));var i=n("ofXK"),r=n("tyNb"),s=n("D/fu"),a=n("UgA8"),o=n("2Vo4"),c=n("fXoL"),l=n("aceb"),d=n("RS3s"),u=n("pLZG"),m=n("lJxs"),p=n("3Pt+");let h=(()=>{class e{constructor(e,t,n,i,r,s){this.route=e,this.packageApi=t,this.auth=n,this.toast=i,this.nbMenuService=r,this.courierService=s,this.showDelivered=!1,this.settings={selectMode:"multi",add:{inputClass:"text-black",confirmCreate:!0,addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{confirmSave:!0,inputClass:"text-black",editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},actions:{add:!0,edit:!0,delete:!0,position:"right"},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"Id",width:"0px",type:"number",filter:!1,editable:!1,addable:!1},trackingNo:{title:"Track No.",type:"string",filter:!1,valuePrepareFunction:e=>e.length>10?e.substr(0,10)+"...":e},description:{title:"Desc.",type:"string",filter:!1},value:{title:"Value",type:"number",filter:!1},customsFee:{title:"Customs Fee",type:"number",filter:!1},weight:{title:"Weight",type:"number",filter:!1,width:"10px"},merchant:{title:"Merchant",type:"string",filter:!1},status:{title:"Status",type:"string",filter:!1,editor:{type:"list",config:{list:[{value:"Pre Alert",title:"Pre Alert"},{value:"At Warehouse",title:"At Warehouse"},{value:"In Transit",title:"In Transit"},{value:"Ready",title:"Ready"},{value:"Delivered",title:"Delivered"}]}}}}},this.packageDataSource=new d.b,this.packageUpdated=new c.EventEmitter,this.bulkActions=[{title:"Mark as Pre-Alert",data:"Pre Alert"},{title:"Mark as At Warehouse",data:"At Warehouse"},{title:"Mark as In Transit",data:"In Transit"},{title:"Mark as Ready",data:"Ready"},{title:"Mark as Delivered",data:"Delivered"}],this.selected=[],this.isAdmin=!1,this.isAdmin="administrator"===localStorage.getItem("role"),this.isAdmin||(this.settings.actions.delete=!1,this.settings.actions.add=!1,this.settings.actions.edit=!1)}ngOnInit(){this.selected=[],this.bulkButtonSub=this.nbMenuService.onItemClick().pipe(Object(u.a)(({tag:e})=>"bulk-actions-menu"===e),Object(m.a)(e=>({title:e.item.title,data:e.item.data}))).subscribe(e=>this.bulkAction(e)),this.getPackages()}ngOnDestroy(){this.bulkButtonSub.unsubscribe()}getPackages(e={neq:"Delivered"}){this.packageApi.find({where:{ownerId:this.route.snapshot.params.id,status:e},order:"id DESC"}).subscribe(e=>{this.packageDataSource=new d.b(e)})}onPackageSearch(e=""){""!==e&&this.packageDataSource.setFilter([{field:"trackingNo",search:e},{field:"id",search:e}],!1)}viewPackage(e){}onDeleteConfirm(e){window.confirm("Are you sure you want to delete this package?")?this.packageApi.deleteById(e.data.id).subscribe(t=>{this.toast.success("Package successfully deleted","Success!"),e.confirm.resolve()},t=>{e.confirm.reject()}):e.confirm.reject()}onCreateConfirm(e){var t,n,i;return e.newData.trackingNo?e.newData.description?e.newData.weight?e.newData.status?void this.packageApi.create({trackingNo:e.newData.trackingNo,description:e.newData.description,status:e.newData.status,value:null!==(t=e.newData.value)&&void 0!==t?t:1,customsFee:null!==(n=e.newData.customsFee)&&void 0!==n?n:0,weight:e.newData.weight,ownerId:this.route.snapshot.params.id,courierId:this.courierService.getId(),createdBy:null!==(i=this.auth.getCurrentUserId())&&void 0!==i?i:-1}).subscribe(t=>{this.toast.success("Package successfully created","Success!"),this.getPackages(),this.packageUpdated.emit(),e.confirm.resolve()},t=>{this.toast.danger("Failed to create package "+t.message,"Failed!"),e.confirm.reject()}):(this.toast.danger("Status is required","Add Package Failed"),void e.confirm.reject()):(this.toast.danger("Weight is required","Add Package Failed"),void e.confirm.reject()):(this.toast.danger("Description is required","Add Package Failed"),void e.confirm.reject()):(this.toast.danger("Tracking No is required","Add Package Failed"),void e.confirm.reject())}onEditConfirm(e){this.packageApi.patchAttributes(e.newData.id,{trackingNo:e.newData.trackingNo,description:e.newData.description,weight:e.newData.weight,status:e.newData.status,value:e.newData.value,customsFee:e.newData.customsFee,merchant:e.newData.merchant}).subscribe(t=>{this.toast.success("Package successfully updated","Success!"),e.confirm.resolve(),this.packageUpdated.emit()},t=>{this.toast.danger("Failed to update package","Failed!"),e.confirm.reject()})}toggleShowDelivered(e){let t={neq:"Delivered"};!0===e&&(t="Delivered"),this.getPackages(t)}onUserRowSelect(e){this.selected=e.selected}bulkAction(e){this.bulkUpdatePackageStatus(e.data)}bulkUpdatePackageStatus(e){const t=this.selected.map(e=>e.id);0!==t.length&&this.packageApi.updatePackageStatus(t,e).subscribe(e=>{this.toast.success("Packages updated successfully","Success!");let t={neq:"Delivered"};this.packageUpdated.emit(),this.showDelivered&&(t="Delivered"),this.getPackages(t),this.selected=[]},e=>{this.toast.danger(e.message,"Failed to update packages")})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](s.b),c["\u0275\u0275directiveInject"](s.i),c["\u0275\u0275directiveInject"](l.mb),c["\u0275\u0275directiveInject"](l.U),c["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-customer-package-table"]],outputs:{packageUpdated:"packageUpdated"},decls:12,vars:5,consts:[[1,"flex-between"],[1,"search"],["placeholder","Search... Enter 3 or more characters","type","text","nbInput","",3,"keydown.enter"],["search",""],["nbSuffix","","nbButton","","ghost","",3,"click"],["icon","search-outline","pack","eva"],[3,"ngModel","checkedChange","ngModelChange"],["nbButton","","status","success","nbContextMenuTag","bulk-actions-menu",3,"disabled","nbContextMenu"],[3,"settings","source","userRowSelect","deleteConfirm","createConfirm","editConfirm"]],template:function(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"nb-form-field",1),c["\u0275\u0275elementStart"](3,"input",2,3),c["\u0275\u0275listener"]("keydown.enter",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](4);return t.onPackageSearch(n.value)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"button",4),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](4);return t.onPackageSearch(n.value)})),c["\u0275\u0275element"](6,"nb-icon",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"nb-toggle",6),c["\u0275\u0275listener"]("checkedChange",(function(e){return t.toggleShowDelivered(e)}))("ngModelChange",(function(e){return t.showDelivered=e})),c["\u0275\u0275text"](8,"Show Delivered"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"button",7),c["\u0275\u0275text"](10,"BULK ACTIONS"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"ng2-smart-table",8),c["\u0275\u0275listener"]("userRowSelect",(function(e){return t.onUserRowSelect(e)}))("deleteConfirm",(function(e){return t.onDeleteConfirm(e)}))("createConfirm",(function(e){return t.onCreateConfirm(e)}))("editConfirm",(function(e){return t.onEditConfirm(e)})),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngModel",t.showDelivered),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",0===t.selected.length)("nbContextMenu",t.bulkActions),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("settings",t.settings)("source",t.packageDataSource))},directives:[l.D,l.I,l.o,l.eb,l.F,l.nb,p.m,p.p,l.y,d.c],styles:[""]}),e})();var b=n("AytR");function f(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ng2-smart-table",11),c["\u0275\u0275listener"]("userRowSelect",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onUserRowSelect(t)}))("deleteConfirm",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onDeleteConfirm(t)}))("custom",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onCustomAction(t)})),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("settings",e.settings)("source",e.invoiceDataSource)}}function g(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",12),c["\u0275\u0275elementStart"](1,"h1"),c["\u0275\u0275text"](2,"Total"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"p"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"currency"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](5,1,e.invoiceTotal))}}let v=(()=>{class e{constructor(e,t,n,i,r,s,a){this.route=e,this.invoiceApi=t,this.packageApi=n,this.toast=i,this.mailbankApi=r,this.nbMenuService=s,this.courierService=a,this.bulkActions=[{title:"Mark as Paid",data:"Paid"},{title:"Mark as Unpaid",data:"Unpaid"},{title:"Send Via Email",data:"Send"}],this.settings={selectMode:"multi",actions:{add:!1,edit:!1,position:"right",custom:[{name:"view",title:'<i class="nb-maximize"></i>'}]},add:{inputClass:"text-black",confirmCreate:!0,addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"Id",width:"0px",type:"number",filter:!1,editable:!1,addable:!1},courierPackageId:{title:"Package ID",type:"number",filter:!1,editor:{type:"list",config:{list:[]}}},sentInEmail:{title:"Sent via Email",type:"string",filter:!1,editable:!1,addable:!1},amount:{title:"Total",type:"number",filter:!1,editable:!1,addable:!1},status:{title:"Status",type:"string",filter:!1,editable:!1,addable:!1}}},this.showTable=!1,this.showPaid=!1,this.selected=[],this.invoiceDataSource=new d.b,this.refreshInvoice=new o.a(!1)}ngOnInit(){this.bulkButtonSubscription=this.nbMenuService.onItemClick().pipe(Object(u.a)(({tag:e})=>"bulk-actions-menu"===e),Object(m.a)(e=>({title:e.item.title,data:e.item.data}))).subscribe(e=>this.bulkAction(e)),this.refreshInvoice.subscribe(e=>{e&&(this.getInvoices(),this.refreshInvoice.next(!1))}),this.getInvoices(),this.getPackagesWihoutInvoice()}ngOnDestroy(){this.bulkButtonSubscription.unsubscribe()}getInvoices(e="Unpaid"){this.invoiceApi.find({where:{customerId:this.route.snapshot.params.id,status:e},order:"id DESC",include:{relation:"courierPackage",fields:{id:!0,manifestNumber:!0}}}).pipe(Object(m.a)(e=>e.map(e=>({id:e.id,courierPackageId:e.courierPackage.manifestNumber?e.courierPackage.manifestNumber:e.courierPackageId,sentInEmail:e.sentInEmail?"YES":"NO",amount:e.amount.toFixed(2),status:e.status,manifestNumber:e.courierPackage.manifestNumber})))).subscribe(e=>{this.invoiceDataSource=new d.b(e)})}onSearch(e=""){""!==e&&this.invoiceDataSource.setFilter([{field:"courierPackageId",search:e},{field:"id",search:e},{field:"amount",search:e}],!1)}viewInvoice(e){window.open(`${b.a.apiUrl}/api/Invoices/preview?courierId=${this.courierService.getId()}&invoiceId=`+e.data.courierPackageId)}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?this.invoiceApi.deleteById(e.data.id).subscribe(t=>{this.toast.success("Invoice successfully deleted","Success!"),e.confirm.resolve()},t=>{this.toast.danger("Failed to delete invoice","Failed!"),e.confirm.reject()}):e.confirm.reject()}getPackagesWihoutInvoice(){this.settings.columns.courierPackageId.editor.config.list=[],this.packageApi.find({where:{ownerId:this.route.snapshot.params.id}}).pipe(Object(m.a)(e=>e.map(e=>({title:`${e.id} - ${e.description}`,value:e.id})))).subscribe(e=>{this.settings.columns.courierPackageId.editor.config.list=e,this.showTable=!0})}onUserRowSelect(e){this.selected=e.selected}bulkAction(e){switch(e.data){case"Paid":case"Unpaid":this.bulkUpdateInvoiceStatus(e.data);break;case"Send":this.bulkSendInvoice();break;default:this.toast.default("Unrecognized action","Uhhhh!")}}bulkUpdateInvoiceStatus(e){const t=this.selected.map(e=>e.id);0!==t.length&&this.invoiceApi.bulkStatusChange(t,e).subscribe(e=>{this.toast.success(`${e.success} invoices deleted successfully out of ${e.total}`,"Process Complete"),this.getInvoices(),this.selected=[]},e=>this.toast.danger("Failed to update invoices "+e.message,"Failed!"))}bulkSendInvoice(){const e=this.selected.map(e=>e.id);e.length<=0||this.mailbankApi.bulkSendInvoices(e).subscribe(e=>{this.toast.success("Invoices queued up for sending.","Success!"),this.showPaid=!1,this.selected=[],this.getInvoices()},e=>{this.toast.danger(e.message,"Failed to Send Invoices")})}toggleShowPaid(e){!0===e?this.getInvoices("Paid"):this.getInvoices()}onCustomAction(e){"view"===e.action&&this.viewInvoice(e)}get invoiceTotal(){return this.selected.reduce((function(e,t){return Number(e)+Number(t.amount)}),0)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](s.g),c["\u0275\u0275directiveInject"](s.b),c["\u0275\u0275directiveInject"](l.mb),c["\u0275\u0275directiveInject"](s.k),c["\u0275\u0275directiveInject"](l.U),c["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-customer-invoice-table"]],inputs:{refreshInvoice:"refreshInvoice"},decls:14,vars:5,consts:[[1,"customer-invoice-table"],[1,"flex-between"],[1,"search"],["placeholder","Search... Enter 3 or more characters","type","text","nbInput","",3,"keydown.enter"],["search",""],["nbSuffix","","nbButton","","ghost","",3,"click"],["icon","search-outline","pack","eva"],[3,"ngModel","checkedChange","ngModelChange"],["nbButton","","status","success","nbContextMenuTag","bulk-actions-menu",3,"disabled","nbContextMenu"],[3,"settings","source","userRowSelect","deleteConfirm","custom",4,"ngIf"],["class","invoice-total",4,"ngIf"],[3,"settings","source","userRowSelect","deleteConfirm","custom"],[1,"invoice-total"]],template:function(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"section",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"nb-form-field",2),c["\u0275\u0275elementStart"](4,"input",3,4),c["\u0275\u0275listener"]("keydown.enter",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](5);return t.onSearch(n.value)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"button",5),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](5);return t.onSearch(n.value)})),c["\u0275\u0275element"](7,"nb-icon",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"nb-toggle",7),c["\u0275\u0275listener"]("checkedChange",(function(e){return t.toggleShowPaid(e)}))("ngModelChange",(function(e){return t.showPaid=e})),c["\u0275\u0275text"](9,"Show Paid"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"button",8),c["\u0275\u0275text"](11,"BULK ACTIONS"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](12,f,1,2,"ng2-smart-table",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](13,g,6,3,"div",10)}2&e&&(c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngModel",t.showPaid),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",0===t.selected.length)("nbContextMenu",t.bulkActions),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.showTable),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.selected.length>0))},directives:[l.D,l.I,l.o,l.eb,l.F,l.nb,p.m,p.p,l.y,i.n,d.c],pipes:[i.d],styles:[""]}),e})();function S(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"form",1),c["\u0275\u0275elementStart"](1,"div",2),c["\u0275\u0275elementStart"](2,"div",3),c["\u0275\u0275elementStart"](3,"div",4),c["\u0275\u0275elementStart"](4,"label",5),c["\u0275\u0275text"](5,"First Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](6,"input",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",3),c["\u0275\u0275elementStart"](8,"div",4),c["\u0275\u0275elementStart"](9,"label",5),c["\u0275\u0275text"](10,"Last Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](11,"input",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",2),c["\u0275\u0275elementStart"](13,"div",3),c["\u0275\u0275elementStart"](14,"div",4),c["\u0275\u0275elementStart"](15,"label",5),c["\u0275\u0275text"](16,"Email"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](17,"input",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",3),c["\u0275\u0275elementStart"](19,"div",4),c["\u0275\u0275elementStart"](20,"label",5),c["\u0275\u0275text"](21,"Phone Number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](22,"input",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",2),c["\u0275\u0275elementStart"](24,"div",3),c["\u0275\u0275elementStart"](25,"div",4),c["\u0275\u0275elementStart"](26,"label",5),c["\u0275\u0275text"](27,"Street 1"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](28,"input",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",3),c["\u0275\u0275elementStart"](30,"div",4),c["\u0275\u0275elementStart"](31,"label",5),c["\u0275\u0275text"](32,"Street 2"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](33,"input",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",2),c["\u0275\u0275elementStart"](35,"div",3),c["\u0275\u0275elementStart"](36,"div",4),c["\u0275\u0275elementStart"](37,"label",5),c["\u0275\u0275text"](38,"City"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](39,"input",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"div",3),c["\u0275\u0275elementStart"](41,"div",4),c["\u0275\u0275elementStart"](42,"label",5),c["\u0275\u0275text"](43,"Parish"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](44,"input",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"div",2),c["\u0275\u0275elementStart"](46,"div",3),c["\u0275\u0275elementStart"](47,"div",4),c["\u0275\u0275elementStart"](48,"nb-form-field"),c["\u0275\u0275elementStart"](49,"label",5),c["\u0275\u0275text"](50,"Tax Registration Number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](51,"input",14),c["\u0275\u0275elementStart"](52,"button",15),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleShowPassword()})),c["\u0275\u0275element"](53,"nb-icon",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"div",17),c["\u0275\u0275elementStart"](55,"button",18),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().updateProfile()})),c["\u0275\u0275text"](56,"UPDATE PROFILE"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](57,"button",19),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.sendPasswordResetEmail(t.userForm.controls.email.value)})),c["\u0275\u0275text"](58,"TRIGGER PASSWORD RESET"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("formGroup",e.userForm),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formControl",e.userForm.controls.firstName),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("formControl",e.userForm.controls.lastName),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formControl",e.userForm.controls.email),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("formControl",e.userForm.controls.phoneNumber),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formControl",e.userForm.controls.street1),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("formControl",e.userForm.controls.street2),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formControl",e.userForm.controls.city),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("formControl",e.userForm.controls.state),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("formControl",e.userForm.controls.trnNumber)("type",e.getInputType()),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("icon",e.showPassword?"eye-outline":"eye-off-2-outline"),c["\u0275\u0275attribute"]("aria-label",e.showPassword?"hide password":"show password"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",e.userForm.invalid)}}let w=(()=>{class e{constructor(e,t,n,i,r,s){this.fb=e,this.userApi=t,this.route=n,this.toast=i,this.mailbankApi=r,this.courierService=s,this.showPassword=!1}ngOnInit(){this.loadForm()}loadForm(){this.userApi.findById(this.route.snapshot.params.id).subscribe(e=>{this.userForm=this.fb.group({firstName:[e.firstName,[p.v.required]],lastName:[e.lastName,[p.v.required]],email:[{value:e.email,disabled:!1},[p.v.required,p.v.email]],phoneNumber:[e.contactInformation.mobilePhone,[p.v.required]],street1:[e.addresses[0].street1,[p.v.required]],street2:[e.addresses[0].street2,[p.v.required]],city:[e.addresses[0].city,[p.v.required]],state:[e.addresses[0].state,[p.v.required]],trnNumber:[e.trnNumber,[p.v.required]],userCreated:[e.createdOn,[]]})})}getInputType(){return this.showPassword?"text":"password"}toggleShowPassword(){this.showPassword=!this.showPassword}updateProfile(){const e=this.userForm.value;this.userApi.patchAttributes(this.route.snapshot.params.id,{firstName:e.firstName,lastName:e.lastName,contactInformation:{mobilePhone:e.phoneNumber},addresses:[{street1:e.street1,street2:e.street2,city:e.city,state:e.state}],trnNumber:e.trnNumber}).subscribe(e=>{this.toast.success("User profile updated successfully","Success!"),this.loadForm()},e=>{this.toast.danger("Failed to  updated user profile "+e.message,"Failed")})}sendPasswordResetEmail(e){this.userApi.resetPassword({email:e,courierId:this.courierService.getId()}).subscribe(e=>{this.toast.success("Password reset email sent","Success")},e=>{this.toast.danger(e.message,"Failed")})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](p.c),c["\u0275\u0275directiveInject"](s.e),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](l.mb),c["\u0275\u0275directiveInject"](s.k),c["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-customer-profile-form"]],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],[1,"label"],["nbInput","","fullWidth","","placeholder","First Name",3,"formControl"],["nbInput","","fullWidth","","placeholder","Last Name",3,"formControl"],["nbInput","","fullWidth","","placeholder","Email",3,"formControl"],["nbInput","","fullWidth","","placeholder","Phone Number",3,"formControl"],["nbInput","","fullWidth","","placeholder","Street 1",3,"formControl"],["nbInput","","fullWidth","","placeholder","Street 2",3,"formControl"],["nbInput","","fullWidth","","placeholder","City",3,"formControl"],["nbInput","","fullWidth","","placeholder","Parish",3,"formControl"],["fullWidth","","nbInput","",3,"formControl","type"],["id","btn-suffix","nbSuffix","","nbButton","","ghost","",3,"click"],["pack","eva",3,"icon"],[1,"button-row"],["nbButton","","outline","","fullWidth","","status","success",3,"disabled","click"],["nbButton","","outline","","fullWidth","","status","warning",3,"click"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,S,59,14,"form",0),2&e&&c["\u0275\u0275property"]("ngIf",t.userForm)},directives:[i.n,p.x,p.n,p.f,l.I,p.b,p.m,p.e,l.D,l.o,l.eb,l.F],styles:["#btn-suffix[_ngcontent-%COMP%]{margin-top:25px}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),e})(),k=(()=>{class e{constructor(e){this.courierService=e}transform(e,...t){return""+this.courierService.padMailboxNumber(e)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](a.a))},e.\u0275pipe=c["\u0275\u0275definePipe"]({name:"mailbox",type:e,pure:!0}),e})();function I(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"p"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"currency"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" Amount Outstanding: ",c["\u0275\u0275pipeBind1"](2,1,e.balance.totalOutstanding)," ")}}function C(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",1),c["\u0275\u0275elementStart"](1,"div",11),c["\u0275\u0275element"](2,"nb-icon",12),c["\u0275\u0275template"](3,I,3,3,"p",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",11),c["\u0275\u0275element"](5,"nb-icon",13),c["\u0275\u0275elementStart"](6,"p"),c["\u0275\u0275text"](7),c["\u0275\u0275pipe"](8,"currency"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",11),c["\u0275\u0275element"](10,"nb-icon",14),c["\u0275\u0275elementStart"](11,"p"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",11),c["\u0275\u0275element"](14,"nb-icon",15),c["\u0275\u0275elementStart"](15,"p"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.balance),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"]("Amount Paid: ",c["\u0275\u0275pipeBind1"](8,4,e.balance.totalPaid),""),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"]("Undelivered Packages: ",e.packageCount.undeliveredPackages,""),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"]("Delivered of Packages: ",e.packageCount.deliveredPackages,"")}}function y(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-tab",16),c["\u0275\u0275element"](1,"ngx-customer-profile-form"),c["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"section"),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"nb-card",3),c["\u0275\u0275elementStart"](4,"nb-card-header"),c["\u0275\u0275element"](5,"nb-user",4),c["\u0275\u0275pipe"](6,"mailbox"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"nb-card-body"),c["\u0275\u0275template"](8,C,17,6,"div",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",1),c["\u0275\u0275elementStart"](10,"div",2),c["\u0275\u0275elementStart"](11,"nb-card",3),c["\u0275\u0275elementStart"](12,"nb-card-body"),c["\u0275\u0275elementStart"](13,"nb-tabset"),c["\u0275\u0275elementStart"](14,"nb-tab",6),c["\u0275\u0275elementStart"](15,"ngx-customer-package-table",7),c["\u0275\u0275listener"]("packageUpdated",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onRefreshInvoices()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"nb-tab",8),c["\u0275\u0275element"](17,"ngx-customer-invoice-table",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](18,y,2,0,"nb-tab",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](5),c["\u0275\u0275propertyInterpolate2"]("name","",e.user.firstName," ",e.user.lastName,""),c["\u0275\u0275propertyInterpolate"]("title",c["\u0275\u0275pipeBind1"](6,6,e.user.mailboxes[0].mailboxNumber)),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.balance&&e.packageCount),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("refreshInvoice",e.refreshInvoices),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.isAdmin)}}let E=(()=>{class e{constructor(e,t,n,i,r,s,a,c,l){this.activatedRoute=e,this.usersApi=t,this.invoiceApi=n,this.packageApi=i,this.iconsLibrary=r,this.toast=s,this.location=a,this.courierService=c,this.router=l,this.userPackages=[],this.userInvoices=[],this.refreshInvoices=new o.a(!1),this.isAdmin=!1,this.isAdmin="administrator"===localStorage.getItem("role"),r.registerFontPack("fa",{packClass:"fa",iconClassPrefix:"fa"})}ngOnInit(){const e=this.activatedRoute.snapshot.params.id;this.loadUser(e),this.loadCustomerBalances(e),this.loadCustomerPackageCount(e)}loadUser(e){this.usersApi.findById(e,{include:["mailboxes"]}).subscribe(e=>{this.user=e},e=>{this.toast.danger("An unexpected error occured, try again later.","An Error Occured"),this.router.navigate(["/pages/unknown"])})}loadCustomerBalances(e){this.invoiceApi.getCustomerBalance(e).subscribe(e=>{this.balance=e})}loadCustomerPackageCount(e){this.packageCount={deliveredPackages:0,undeliveredPackages:0},this.packageApi.count({status:"Delivered",ownerId:e}).subscribe(e=>{this.packageCount.deliveredPackages=e.count}),this.packageApi.count({status:{neq:"Delivered"},ownerId:e}).subscribe(e=>{this.packageCount.undeliveredPackages=e.count})}deleteUser(){window.confirm("Are you sure you want to delete this user")&&this.usersApi.deleteById(this.activatedRoute.snapshot.params.id).subscribe(e=>{this.toast.success("User was successfully deleted","Success!"),this.location.back()},e=>{this.toast.danger("Failed to delete user","Failed!")})}sendPasswordResetEmail(){this.usersApi.resetPassword({email:this.user.email,courierId:this.courierService.getId(),redirectUrl:"https://app.gemskycouriers.com"}).subscribe(e=>{this.toast.success("Password reset email was sent","Success!")},e=>{this.toast.danger(e.message,"Failed!")})}onRefreshInvoices(){this.loadCustomerBalances(this.activatedRoute.snapshot.params.id),this.refreshInvoices.next(!0)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](s.e),c["\u0275\u0275directiveInject"](s.g),c["\u0275\u0275directiveInject"](s.b),c["\u0275\u0275directiveInject"](l.G),c["\u0275\u0275directiveInject"](l.mb),c["\u0275\u0275directiveInject"](i.j),c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](r.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-customer"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xxl-12"],["accent","info"],[3,"name","title"],["class","row",4,"ngIf"],["tabTitle","Packages"],[3,"packageUpdated"],["tabTitle","Invoices"],[3,"refreshInvoice"],["tabTitle","Profile",4,"ngIf"],[1,"col-sm-3"],["icon","file-invoice-dollar","pack","fa"],["icon","money-bill","pack","fa"],["icon","box","pack","fa"],["icon","box-open","pack","fa"],["tabTitle","Profile"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,x,19,8,"section",0),2&e&&c["\u0275\u0275property"]("ngIf",t.user)},directives:[i.n,l.r,l.t,l.qb,l.q,l.hb,l.gb,h,v,l.F,w],pipes:[k,i.d],styles:["nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1rem}nb-card-body[_ngcontent-%COMP%]   .col-sm-3[_ngcontent-%COMP%]{text-align:center}nb-card-body[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}"]}),e})();var P=n("vkgz"),F=n("H/qo"),A=n("vxfF"),D=n("Bxrs"),N=n("kmnG"),j=n("7ZcW");function U(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",13),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](),c["\u0275\u0275reference"](14).open()})),c["\u0275\u0275text"](1,"Import Customers"),c["\u0275\u0275elementEnd"]()}}function B(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",14),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().importCustomers()})),c["\u0275\u0275text"](1,"Upload File"),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("disabled",e.fileUploadForm.invalid)("nbSpinner",e.processing)}}function M(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"nb-icon",15),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().fileUploadForm.reset()})),c["\u0275\u0275elementEnd"]()}}const R=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,s,a){this.usersApi=e,this.router=t,this.toast=n,this.dialogService=i,this.courierService=r,this.fb=s,this.uploadService=a,this.isAdmin=!1,this.processing=!1,this.settings={add:{inputClass:"text-black",confirmCreate:!0,addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},actions:{add:!0,delete:!0,edit:!1,position:"right"},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"Id",width:"0px",type:"number",filter:!1,editable:!1,addable:!1},mailboxNumber:{title:"Mailbox Number",type:"string",filter:!1,editable:!1,addable:!1},name:{title:"Name",type:"string",filter:!1},email:{title:"E-mail",type:"string",filter:!1},phoneNumber:{title:"Phone Number",type:"string",filter:!1}}},this.source=new d.b,this.customers=[],this.showAddForm=!1,this.acceptedFileTypes=[".csv"],this.isLoadingMore=!1,this.limit=9,this.offset=0,this.skip=0,this.isAdmin="administrator"===localStorage.getItem("role"),this.isAdmin||(this.settings.actions.delete=!1,this.settings.actions.add=!1,delete this.settings.columns.email)}ngOnInit(){this.getUsers(),this.fileUploadForm=this.fb.group({file:[null,[p.v.required]]})}importCustomers(){this.processing||(this.processing=!0,this.uploadService.uploadFile(this.fileUploadForm.value.file,"Uploads",this.courierService.getId().toString()).subscribe(e=>{this.usersApi.importFromCsv(this.courierService.getId(),e.name,!1).subscribe(e=>{this.processing=!1,this.toast.success(`${e.success} customers successfully imported out of ${e.total}`,"File Import Result",{duration:1e4}),e.failed>0&&this.toast.danger(e.failed+" customers failed to be imported","File Import Failed",{duration:1e4}),e.exists>0&&this.toast.warning(e.exists+" customers were not imported because they already exist","File Import Duplicates",{duration:1e4}),this.fileUploadForm.reset(),this.getUsers()},e=>{this.toast.danger("Failed to import customers "+e.message,"Failed to import"),this.processing=!1})},e=>{this.processing=!1,this.toast.danger("Failed to upload file "+e.message,"Failed",{duration:1e4})}))}toggleAddForm(){this.showAddForm=!this.showAddForm}resetSearch(e){(!e||e<=2)&&this.source.setFilter([])}onSearch(e=""){e.length<2||this.source.setFilter([{field:"name",search:e},{field:"mailboxNumber",search:e},{field:"email",search:e},{field:"phoneNumber",search:e}],!1)}getUsers(){this.usersApi.find({where:{realm:this.courierService.getRealm()},include:["mailboxes"],order:"id DESC"}).pipe(Object(P.a)(e=>{this.customers=e}),Object(m.a)(e=>e.map(e=>({id:e.id,mailboxNumber:e.mailboxes.length>0?""+this.courierService.padMailboxNumber(e.mailboxes[0].mailboxNumber):"Unassigned",name:`${e.firstName||"Profile"} ${e.lastName||"Incomplete"}`,email:e.email,phoneNumber:e.contactInformation.mobilePhone})))).subscribe(e=>{this.source=new d.b(e)})}viewCustomer(e){this.router.navigate(["/pages/customers",e.data.id])}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?this.usersApi.deleteById(e.data.id).subscribe(t=>{this.toast.success("User successfully deleted","User Deleted"),e.confirm.resolve()},t=>{this.toast.danger("Failed to delete user"),e.confirm.reject()}):e.confirm.reject()}onCreateConfirm(e){return e.newData.name?e.newData.email?F.validate(e.newData.email)?e.newData.phoneNumber?void this.usersApi.create({email:e.newData.email,password:Math.random().toString(36).substr(2,11),realm:this.courierService.getRealm(),source:"Admin"}).subscribe(t=>{this.usersApi.patchAttributes(t.id,{firstName:e.newData.name.substr(0,e.newData.name.indexOf(" ")),lastName:e.newData.name.substr(e.newData.name.indexOf(" "),e.newData.name.length),contactInformation:{mobilePhone:e.newData.phoneNumber}}).subscribe(t=>{this.toast.success("User successfully created","Success!"),this.getUsers(),e.confirm.resolve()},t=>{this.toast.danger("Failed to update user profile "+t.mesage,"Failed"),e.confirm.reject()})},t=>{this.toast.danger("Failed to create user "+t.message,"Failed!"),e.confirm.reject()}):(this.toast.danger("Phone number is invalid","Add Customer Failed"),void e.confirm.reject()):(this.toast.danger("Email name is invalid","Add Customer Failed"),void e.confirm.reject()):(this.toast.danger("Email name is required","Add Customer Failed"),void e.confirm.reject()):(this.toast.danger("Name is required","Add Customer Failed"),void e.confirm.reject())}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.e),c["\u0275\u0275directiveInject"](r.c),c["\u0275\u0275directiveInject"](l.mb),c["\u0275\u0275directiveInject"](l.C),c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](p.c),c["\u0275\u0275directiveInject"](D.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-customers"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](A.a,!0),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.viewport=n.first)},decls:19,vars:7,consts:[[1,"flex-between"],[1,"search"],["placeholder","Search... Enter 2 or more characters","type","text","nbInput","",3,"input","keydown"],["search",""],["nbSuffix","","nbButton","","ghost","",3,"click"],["icon","search-outline","pack","eva"],[1,"hidden"],["multiple","false",3,"accept","formControl"],["fileInput",""],["nbButton","","outline","","status","primary",3,"click",4,"ngIf"],["nbButton","","outline","","status","success",3,"disabled","nbSpinner","click",4,"ngIf"],["icon","close-outline","pack","eva",3,"click",4,"ngIf"],[3,"settings","source","userRowSelect","deleteConfirm","createConfirm"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","success",3,"disabled","nbSpinner","click"],["icon","close-outline","pack","eva",3,"click"]],template:function(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275text"](2," Customers "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"nb-card-body"),c["\u0275\u0275elementStart"](4,"div",0),c["\u0275\u0275elementStart"](5,"div"),c["\u0275\u0275elementStart"](6,"nb-form-field",1),c["\u0275\u0275elementStart"](7,"input",2,3),c["\u0275\u0275listener"]("input",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](8);return t.resetSearch(n.value.length)}))("keydown",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](8);return t.onSearch(n.value)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"button",4),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](8);return t.onSearch(n.value)})),c["\u0275\u0275element"](10,"nb-icon",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div"),c["\u0275\u0275elementStart"](12,"mat-form-field",6),c["\u0275\u0275element"](13,"ngx-mat-file-input",7,8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](15,U,2,0,"button",9),c["\u0275\u0275template"](16,B,2,2,"button",10),c["\u0275\u0275template"](17,M,1,0,"nb-icon",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"ng2-smart-table",12),c["\u0275\u0275listener"]("userRowSelect",(function(e){return t.viewCustomer(e)}))("deleteConfirm",(function(e){return t.onDeleteConfirm(e)}))("createConfirm",(function(e){return t.onCreateConfirm(e)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("accept",t.acceptedFileTypes)("formControl",t.fileUploadForm.controls.file),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.fileUploadForm.controls.file.value&&t.isAdmin),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.fileUploadForm.controls.file.value),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.fileUploadForm.controls.file.value),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("settings",t.settings)("source",t.source))},directives:[l.r,l.t,l.q,l.D,l.I,l.o,l.eb,l.F,N.a,j.a,p.m,p.e,i.n,d.c,l.cb],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]}),e})()},{path:":id",component:E}];let O=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.g.forChild(R)],r.g]}),e})();var T=n("vTDv");let V=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,O,i.c,p.g,l.p,l.z,l.u,l.pb,l.H,N.c,j.b,l.rb,l.R,l.J,l.ob,T.a,l.db,l.E,l.ib,A.c,l.p,d.d,p.s]]}),e})()}}]);