!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Yj9t:function(n,a,r){"use strict";r.r(a),r.d(a,"AuthModule",(function(){return O}));var i=r("ofXK"),s=r("tyNb"),o=r("McNs"),l=r("3Pt+"),d=r("UgA8"),c=r("AytR"),u=r("PqYM"),p=r("qXBG"),m=r("fXoL"),h=r("aceb");function f(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",11),m["\u0275\u0275element"](1,"img",12),m["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("src",n.imageUrl,m["\u0275\u0275sanitizeUrl"])}}function g(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Login"),m["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Forgot Password"),m["\u0275\u0275elementEnd"]())}function w(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Change Password"),m["\u0275\u0275elementEnd"]())}function y(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Login using your email address"),m["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Enter your email address to reset your password"),m["\u0275\u0275elementEnd"]())}function S(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Set your new password"),m["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275elementStart"](1,"label",14),m["\u0275\u0275text"](2,"Email address:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"input",15),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("formControl",n.email)}}function C(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275elementStart"](1,"span",16),m["\u0275\u0275elementStart"](2,"label",17),m["\u0275\u0275text"](3,"Password:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"p",18),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().changeMode(1)})),m["\u0275\u0275text"](5," Forgot Password? "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](6,"input",19),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("formControl",a.password)}}function V(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275elementStart"](1,"span",16),m["\u0275\u0275elementStart"](2,"label",17),m["\u0275\u0275text"](3,"Confirm Password:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](4,"input",19),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("formControl",n.confirmPassword)}}function M(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Login"),m["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Forgot Password"),m["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"Change Password"),m["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-alert",20),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" Please wait ",n.passwordResetTimer," seconds before resetting password again ")}}function I(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",21),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().changeMode(0)})),m["\u0275\u0275text"](1," Back to Login "),m["\u0275\u0275elementEnd"]()}}var L,A,j,T=((L=function(){function n(t,a,r,i,s,o){e(this,n),this.fb=t,this.authService=a,this.toast=r,this.router=i,this.route=s,this.courierService=o,this.authMode=0,this.versionNumber=c.a.version,this.isLoading=!1,this.hasError=!1,this.passwordResetTimer=0,this.timeLeft=60,this.authService.isAuthenticated()&&this.router.navigate(["/main"])}var a,r,i;return a=n,(r=[{key:"ngOnInit",value:function(){var e=this;this.authForm=this.fb.group({email:["",[l.v.required,l.v.email]],password:["",[l.v.required,l.v.minLength(8)]],confirmPassword:["",[]]}),this.route.params.subscribe((function(t){t.access_token?(e.accessToken=t.access_token,e.changeMode(2)):e.changeMode(0)}))}},{key:"submit",value:function(){var e=this;this.isLoading=!0;var t=this.email.value,n=this.password.value,a=this.confirmPassword.value;0===this.authMode?this.authService.login(t,n).subscribe((function(t){e.isLoading=!1,e.authService.setCurrentUser(t),e.router.navigate(["/main"])}),(function(t){e.isLoading=!1,console.error(t),e.toast.danger("There was an error logging in, please try again later.","Failed",{duration:5e3})})):1===this.authMode?this.authService.resetPassword(t).subscribe((function(t){e.startTimer(),e.toast.success("A password reset link has been sent to your email. Please allow up to 5 minutes for the email to arrive.","Success",{duration:8e3}),e.isLoading=!1}),(function(t){e.isLoading=!1,e.toast.danger("There was an error in trying to reset your password","Failed")})):2===this.authMode&&this.authService.changePassword(n,a,this.accessToken).subscribe((function(t){e.isLoading=!1,e.toast.success("Password successfully changed, please login to continue","Success"),e.changeMode(0)}),(function(t){e.isLoading=!1,e.toast.danger("There was an error in trying to reset your password","Failed")}))}},{key:"matchValues",value:function(e){return function(t){return t.parent&&t.parent.value&&t.value===t.parent.controls[e].value?null:{isMatching:!1}}}},{key:"changeMode",value:function(e){switch(this.authMode=e,this.unsetAllValidators(),this.authMode){case 0:this.email.setValidators([l.v.required,l.v.email]),this.email.updateValueAndValidity(),this.password.setValidators([l.v.required,l.v.minLength(8)]),this.password.updateValueAndValidity();break;case 1:this.email.setValidators([l.v.required,l.v.email]),this.email.updateValueAndValidity();break;case 2:this.confirmPassword.setValidators([l.v.required,l.v.minLength(8),this.matchValues("password")]),this.confirmPassword.updateValueAndValidity(),this.password.setValidators([l.v.required,l.v.minLength(8)]),this.password.updateValueAndValidity();break;default:this.authMode=0,this.email.setValidators([l.v.required,l.v.email]),this.email.updateValueAndValidity(),this.password.setValidators([l.v.required,l.v.minLength(8)]),this.password.updateValueAndValidity()}}},{key:"getError",value:function(e){var t=this.authForm.controls[e].errors;return t.required?"This field is required":t.email?"A valid email address is required":t.isMatching?"Please ensure both passwords match":t.minlength?"Passwords must have atleast 8 or more chacters":void 0}},{key:"unsetAllValidators",value:function(){this.email.setValidators([]),this.password.setValidators([]),this.confirmPassword.setValidators([]),this.email.updateValueAndValidity(),this.password.updateValueAndValidity(),this.confirmPassword.updateValueAndValidity()}},{key:"startTimer",value:function(){var e=this,t=Object(u.a)(1e3,2e3).subscribe((function(n){e.passwordResetTimer=e.timeLeft-n,e.passwordResetTimer<=0&&t.unsubscribe()}))}},{key:"email",get:function(){return this.authForm.controls.email}},{key:"password",get:function(){return this.authForm.controls.password}},{key:"confirmPassword",get:function(){return this.authForm.controls.confirmPassword}}])&&t(a.prototype,r),i&&t(a,i),n}()).\u0275fac=function(e){return new(e||L)(m["\u0275\u0275directiveInject"](l.c),m["\u0275\u0275directiveInject"](p.a),m["\u0275\u0275directiveInject"](h.mb),m["\u0275\u0275directiveInject"](s.c),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](d.a))},L.\u0275cmp=m["\u0275\u0275defineComponent"]({type:L,selectors:[["ngx-auth"]],decls:23,vars:23,consts:[["class","login-logo",4,"ngIf"],["id","title",1,"title",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"sub-title",3,"ngSwitch"],["aria-labelledby","title",3,"formGroup"],["form","ngForm"],["class","form-control-group",4,"ngIf"],["nbButton","","fullWidth","","status","primary","size","large",3,"disabled","ngSwitch","click"],["status","info",4,"ngIf"],["nbButton","","fullWidth","","size","large",3,"click",4,"ngIf"],[1,"version"],[1,"login-logo"],[3,"src"],[1,"form-control-group"],["for","input-email",1,"label"],["nbInput","","fullWidth","","type","email","name","email","id","input-email","pattern",".+@.+\\..+","placeholder","Email address","fieldSize","large","autofocus","",3,"formControl"],[1,"label-with-link"],["for","input-password",1,"label"],["href","",1,"forgot-password","caption-2",3,"click"],["nbInput","","fullWidth","","name","password","type","password","id","input-password","placeholder","Password","fieldSize","large",3,"formControl"],["status","info"],["nbButton","","fullWidth","","size","large",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275template"](0,f,2,1,"div",0),m["\u0275\u0275pipe"](1,"async"),m["\u0275\u0275elementStart"](2,"h1",1),m["\u0275\u0275template"](3,g,2,0,"span",2),m["\u0275\u0275template"](4,v,2,0,"span",2),m["\u0275\u0275template"](5,w,2,0,"span",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"p",3),m["\u0275\u0275template"](7,y,2,0,"span",2),m["\u0275\u0275template"](8,b,2,0,"span",2),m["\u0275\u0275template"](9,S,2,0,"span",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"form",4,5),m["\u0275\u0275template"](12,x,4,1,"div",6),m["\u0275\u0275template"](13,C,7,1,"div",6),m["\u0275\u0275template"](14,V,5,1,"div",6),m["\u0275\u0275elementStart"](15,"button",7),m["\u0275\u0275listener"]("click",(function(){return t.submit()})),m["\u0275\u0275template"](16,M,2,0,"span",2),m["\u0275\u0275template"](17,P,2,0,"span",2),m["\u0275\u0275template"](18,k,2,0,"span",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](19,E,2,1,"nb-alert",8),m["\u0275\u0275template"](20,I,2,0,"button",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"p",10),m["\u0275\u0275text"](22),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](1,21,t.courierService.courierApplication)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngSwitch",t.authMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",2),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitch",t.authMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",2),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",t.authForm),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",2!=t.authMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",1!=t.authMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",2==t.authMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("disabled",t.authForm.invalid||t.passwordResetTimer)("ngSwitch",t.authMode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngSwitchCase",2),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.passwordResetTimer),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0!=t.authMode),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](t.versionNumber))},directives:[i.n,i.p,i.q,l.x,l.n,l.f,h.o,h.I,l.b,l.r,l.m,l.e,h.j],pipes:[i.b],styles:[".forgot-password[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{margin-bottom:1rem}.login-logo[_ngcontent-%COMP%]{width:120px;height:120px;background-color:#fff;border-radius:120px;display:flex;align-items:center;justify-items:center;justify-content:center;margin:0 auto 2rem}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .version[_ngcontent-%COMP%]{text-align:center}"]}),L),q=[{path:"",component:o.a,children:[{path:"",redirectTo:"login"},{path:"login",component:T},{path:"reset-password/:access_token",component:T}]}],F=((j=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:j}),j.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||j)},imports:[[s.g.forChild(q)],s.g]}),j),O=((A=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:A}),A.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||A)},imports:[[i.c,h.k,h.u,l.s,h.p,h.J,h.w,F,o.b]]}),A)}}])}();